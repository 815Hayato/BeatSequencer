# BeatSequencer
## 使用技術
Python

## 作成時期
2022年夏ごろ

## 概要
用意した音声ファイルと入力したコマンドを元に、リアルタイムで音楽を生成するビートシーケンサーソフトウェア  

## 特徴
1. 音楽のリズムをコマンド(文字)で記述するから、どんなリズムでも再現できる(楽譜に再現しにくいリズムでも)
2. リアルタイムで音楽を生成し、再生してくれる
3. 任意の音源を使用できる(楽器の音でなくてもよい)
4. GUI(自作)で操作する

## 使用例
ExampleSong_command.txtに書いているテキスト通りにBeatSequencer.pyを動かした様子をExampleSong.mp4で確認できます。ExampleSong_musicフォルダには、演奏時に生成した音声データをフェイズごとに記録して格納しています(Phase1~9.wav)

## 使い方
1. Soundsフォルダに、使用したい音源のwavファイル(ステレオ、44100Hz)を格納する
2. CUI上でBeatSequencer.pyを実行する
3. CUI上の指示に従ってプロジェクト名とテンポ・拍子を決定(方法は後述)
4. GUIが立ち上がるので、種々のコマンド(後述)を用いて音楽を生成してみる

## コマンドの書き方
具体的な例はExampleSong_command.txtとExampleSong.mp4を参照  
〇テンポ・拍子の決定方法  
"/x:y@z"(x,y,zは変数)で記述  
zはテンポ(四分音符が1分間にどれだけ入るか)  
拍子は一小節に何分音符(x)が何個(y)入るかによって定義する  
この時、xは一拍を何分割するかを表すことにする  
例えば、4/4拍子は、4分音符(x)が4個分(y)で一小節、4分音符は一拍を1つ(x)に分割しているので、"/1:4"で表す。  
まとめると、bpm120の4/4拍子は"/1:4@120"と表せばよいことになる。  

〇GUI上のコマンドの記述方法  
コマンドはGUI上のcommand欄に記述する  
記述したコマンドはshiftを押しながらEnterを押すことで実行できる  
load,write,setコマンドに限り、同時に複数のコマンドを書くことができる(改行で各コマンドを区切る)  
1. loadコマンド  
wavファイルのデータを取り込むコマンド  
"load x as y"(x,yは変数)で記述する  
xはSoundsフォルダに格納されたwavファイル(ステレオ、44100Hz)の名前  
yはGUI上で使う名前  
例) "load stick as st" 「stick.wavをstという名前でロードする」  
2. writeコマンド  
リズムを記述するコマンド  
"write /x:y;z/x:y;z/x:y;z... as a"(x,y,z,aは変数)で記述する  
aはそのリズムをGUI上で操作するときに使う名前  
"/x:y;z"で一つの音符(休符)を表す　xの前に"0"をつけると休符として扱う　そうでなければ音符として扱う  
xはテンポ・拍子の決める時と同様に、1拍を何分割する音符であるかを表す  
例えばx=1であれば四分音符、x=2であれば八分音符、x=4であれば16分音符を表すことになる  
yは、記述しようとする音符が、xで決めた音符の長さの何倍であるかを表す  
例えば/1:2であれば四分音符の2倍の長さ、つまり二分音符を表す　/4:3であれば16音符の3倍の長さ、つまり付点8分音符を表す  
yを省略すると、自動的にy=1であるみなす(例えば"/1"は四分音符を表す)  
zは、音符の反復回数を表す  
例えば"/1;4"であれば、四分音符を4回繰り返す  
zを省略すると、自動的にz=1であるとみなす(音符・休符は繰り返さないことになる)  
このような"/x:y;z"を複数羅列することで、リズムを記述する  
なお、xの前に"^"をつければアクセント(音量を大きくする)、"-"をつければゴーストノート(音量を小さくする)として音符を扱う  
例)"write /4:3;4 as r1" 「付点八分音符(16分音符の3倍)を4回繰り返すリズムを、r1とおく」    
4. setコマンド  
音源とリズムを組み合わせた声部(パート)を記述するコマンド  
"set a by b,c"(a,b,cは変数)で記述する  
aはその声部(パート)を操作する際の名前を表す  
bは使いたい音源の使用名、bは使いたいリズムの使用名を表す  
例)"set p1 by st,r1" 「st(stick.wavの使用名)をr1(付点八分音符(16分音符の3倍)を4回繰り返すリズムの使用名)で演奏する声部(パート)を、p1とおく」  
5. addコマンド  
アクティブ状態でない(再生時に演奏しない状態)声部をアクティブ状態(再生時に演奏する状態)にする  
"add x1,x2,x3..."(x1,x2,x3は変数)で記述する  
x1,x2,x3...には、アクティブ状態にしたいパートの使用名を記述する  
例)"add p1" 「パートp1をアクティブ状態にする」  
6. omitコマンド  
アクティブ状態のパートを非アクティブ状態(再生時に演奏しない状態)にする  
"omit y1,y2,y3..."(y1,y2,y3は変数)で記述する  
y1,y2,y3...には、非アクティブ状態にしたいパートの使用名を記述する  
例)"omit p1" 「パートp1を非アクティブ状態にする」  
7. playコマンド  
"play"と記述することで、音楽を再生する  
8. haltコマンド  
"halt"と記述することで、音楽を停止する  
9. quitコマンド  
"quit"と記述することで、GUIを閉じてプログラムを終了する  
## 今後の展望(改善点)
1. モノラル・ステレオを両立して対応できるようにする(今はステレオしか対応していない)
